# Tools

We rely on tooling to increase our productivity when building Apps in EggShell.

Using the [eggshell CLI](./tools/cli.md) allows us to scaffold new apps, new components,
routes, dialogs, wrappers for third party libraries. It also allows us to rename components
easily. And it is what is used to package the app for deployment.

VSCode is our IDE of choice for working on EggShell projects. A number
of extensions and configuration options make for a more productive experience. And while
the `eggshell` CLI is used to scaffold multi-file things like components, VSCode [snippets](./tools/snippets.md)
are a huge time saver for scaffolding localized snippets of code that you would otherwise
be unlikely to keep in memory, and would probably to to copy/paste/modify from somewhere else.

## Known Issues

### Errors in the .render files are cryptic

This is probably the single biggest drawback of the current version of EggShell.
The problem is that each `SomeComponent.render` file is compiled by the RenderDsl compiler into
the `SomeComponent.Render.fs` regular F# file. Any typos, missed parenthesis, or other syntactic
or type errors that you make within the expressions in props and rt- attributes of the `.render`
file make their way into the `.Render.fs` file. The F# compiler toolchain (and, by
extension, Fable) do not know anything about the source `.render` files, and simply report the
errors in the `.Render.fs` files. I.e. no source mapping takes place.

#### What's the long-term plan?

The long term plan is to find a way to error-map back to the source file, so that both on the command
line and in the IDE you see the errors mapped right to the source.

F# actually has a compiler directive `# line` for specifying the source line number from which
the next line was generated. But this directive doesn't work with Fable. Since I tried, Fable 3 has
been realeased, so we'll try again, and if it doesn't work in Fable 3 either, we'll request that the
feature is added (it's actually not a Fable issue, but an F# compiler services issue, I think).

In the mid term we can add some more RenderDsl compiler level checks. A good candidate for this would
be a check for balanced parenthesis/quotes — these tend to lead to the most cryptic error messages.
Another potential one is the check for whether the provided prop names (though not types) match what
the component expects.

#### What to do in the meantime?

You need to attack the problem from three directions:

* Get comfortable opening up the autogenerated `.Render.fs` file, going to the line number,
  and thus discovering what the cryptic-looking error actually is. These files, being autogenerated,
  are kind of scary-looking at first, but after a few times figuring out errors becomes much easier.

* Until you get more familiar with writing `.render` code, keep your edit-save-see-errors loop short.
  That way you'll only ever get a small number of errors, and it will be trivial to track them down,
  because the "look where you touched" rule tells you exactly where the error is likely to be found.

* Build out a mental model of what the RenderDsl gets compiled into. It's pretty straight-forward.
  In programming we do this kind of mental mapping all the time, so it's not a new skill to acquire.
  And yeah, I get that it's a pain to have to do this, but that's the price of working with a framework
  in early stages of development. And's really not that hard.

